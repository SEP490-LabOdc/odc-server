syntax = "proto3";
package com.odc.userservice.v1;

option java_multiple_files = true;
option java_package = "com.odc.userservice.v1";
option java_outer_classname = "UserServiceProto";

service UserService {
  rpc CheckEmailExists(CheckEmailRequest) returns (CheckEmailResponse);
  rpc GetUserById(GetUserByIdRequest) returns (GetUserByIdResponse);
  rpc GetName(GetNameRequest) returns (GetNameResponse);
  rpc CheckRoleByUserId(CheckRoleByUserIdRequest) returns (CheckRoleByUserIdResponse);
  rpc GetMentorsWithProjectCount(GetMentorsWithProjectCountRequest) returns (GetMentorsWithProjectCountResponse);
  rpc GetRoleIdByUserId(GetRoleIdByUserIdRequest) returns (GetRoleIdByUserIdResponse);
  rpc CheckUsersInRole(CheckUsersInRoleRequest) returns (CheckUsersInRoleResponse);
  rpc GetUsersByIds(GetUsersByIdsRequest) returns (GetUsersByIdsResponse);
}

message CheckEmailRequest {
  string email = 1;
}

message CheckEmailResponse {
  bool result = 1;
}

message GetUserByIdRequest {
  string user_id = 1;
}

message GetUsersByIdsRequest {
  repeated string user_id = 1;
}

message UserInfo {
  string userId = 1;
  string fullName = 2;
  string email = 3;
  string phone = 4;
  string avatarUrl = 5;
}

message GetUsersByIdsResponse {
  repeated UserInfo users = 1;
}

message GetUserByIdResponse {
  string id = 1;
  string full_name = 2;
  string email = 3;
  string phone = 4;
  string avatar_url = 5;
  string role = 6;
}

message GetNameRequest {
  repeated string ids = 1;
}

message GetNameResponse {
  map<string, string> map = 1;
}

message CheckRoleByUserIdRequest {
  string user_id = 1;
  string role_name = 2;
}

message CheckRoleByUserIdResponse {
  bool result = 1;
}
message GetMentorsWithProjectCountRequest {

}

message MentorInfo {
  string id = 1;
  string name = 2;
  string email = 3;
  string avatar_url = 4;
  int32 project_count = 5;
}

message GetMentorsWithProjectCountResponse {
  repeated MentorInfo mentors = 1;
}

message GetRoleIdByUserIdRequest {
  string user_id = 1;
}

message GetRoleIdByUserIdResponse {
  string role_id = 1;
}

message CheckUsersInRoleRequest {
  string roleName = 1;
  repeated string user_ids = 2;
}

message CheckUsersInRoleResponse {
  map<string, bool> results = 1;
}